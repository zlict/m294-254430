<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <script>
            function createTableCell(value) {
                const el = document.createElement("td");
                el.innerText = value;
                return el;
            }

            function renderTasks(data) {
                const tbodyEl = document.querySelector("tbody");
                data.forEach((entry) => {
                    const trEl = document.createElement("tr");
                    const idTdEl = createTableCell(entry.id);
                    const titleTdEl = createTableCell(entry.title);
                    const completedTdEl = createTableCell(entry.completed);
                    trEl.append(idTdEl, titleTdEl, completedTdEl);
                    tbodyEl.append(trEl);
                })
            }

            function fetchTasks() {
                fetch("http://localhost:3000/auth/cookie/tasks", { credentials: "include" })
                    .then((res) => res.json())
                    .then((data) => renderTasks(data));
            }

            document.addEventListener("DOMContentLoaded", () => {
                fetchTasks();
            });
        </script>
    </head>

    <body>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Completed</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </body>

</html>